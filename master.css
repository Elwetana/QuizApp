:root {
  --square-gap: 12px;
}
* { box-sizing: border-box; }
html, body { margin: 0; background: var(--bg); color: var(--text); height: 100%; }
body { display: flex; justify-content: center; align-items: flex-start; }

/* Fixed 16:9 stage centered horizontally, top-aligned vertically */
#stage { width: min(100vw, calc(100vh * (16 / 9))); aspect-ratio: 16 / 9; }

/* Layout fills the 16:9 stage and acts as a container for cqh */
#layout { display: flex; height: 100%; width: 100%; overflow: hidden; container-type: size; }
/* Presentation (single-question) mode */
#present { height: 100%; width: 100%; padding: 16px; display: flex; align-items: stretch; justify-content: stretch; }
#present .panel { background: var(--card); border: 1px solid #1f2937; border-radius: .8rem; width: 100%; height: 100%; display: grid; grid-template-rows: 1fr; }
#present .qwrap { padding: 1.5rem; height: 100%; min-height: 0; }
#present .panel > .qwrap { grid-row: 1 / -1; }
#present .qwrap .body { min-height: 0; }
#present .qwrap .title { font-size: clamp(28px, min(10cqh, 10cqw), 96px); font-weight: 800; margin-bottom: .5rem; }
#present .qwrap .body { overflow: hidden; display: grid; align-content: center; justify-items: center; container-type: size; }
/* Slightly smaller responsive text to ensure fit */
#present .qwrap .text { width: 100%; text-align: left; font-size: clamp(20px, min(12cqh, 10cqw), 96px); line-height: 1.15; overflow-wrap: anywhere; word-break: break-word; hyphens: auto; }
/* In presentation mode, keep hints same size as question text */
#present .qwrap .hint { color: var(--muted); margin-top: .5rem; font-size: clamp(20px, min(12cqh, 10cqw), 96px); line-height: 1.15; overflow-wrap: anywhere; word-break: break-word; hyphens: auto; }

/* No promotion overrides in presentation mode: all texts same size */

/* 3x2 square grid sized off viewport height: width = 1.5 * vh */
#grid {
  display: flex;
  flex-wrap: wrap;
  align-content: flex-start;
  gap: var(--square-gap);
  padding: var(--square-gap);
  width: 150cqh; /* 1.5 * container height */
  min-width: 0;
}

#grid .cell {
  width: calc((100% - 2 * var(--square-gap)) / 3);
  aspect-ratio: 1 / 1;
  background: var(--card);
  border: 1px solid #1f2937;
  border-radius: .8rem;
  overflow: hidden;
  display: flex;
  align-items: stretch;
  justify-content: stretch;
}

#grid .cell .inner { padding: 1rem; width: 100%; height: 100%; overflow: hidden; }

#grid .cell.info { display: grid; place-content: center; text-align: center; }
#grid .cell.info .round { font-size: 2.2rem; font-weight: 700; margin-bottom: .5rem; color: var(--text); }
#grid .cell.info .clock { font-size: 3rem; font-variant-numeric: tabular-nums; color: var(--accent-2); }

/* Right strip (unused for now) */
#strip { flex: 1 1 auto; border-left: 1px solid #1f2937; background: #0b1220; overflow: auto; }
#strip .board { padding: 1rem; }
#strip .board-title { font-weight: 800; letter-spacing: .02em; margin: 0 0 .5rem 0; }
#strip .board-list { list-style: none; padding: 0; margin: 0; display: grid; gap: .25rem; }
#strip .board-list li { display: flex; align-items: baseline; justify-content: space-between; gap: .5rem; background: rgba(0,0,0,0.15); border: 1px solid rgba(0,0,0,0.25); border-radius: .4rem; padding: .35rem .5rem; }
#strip .board-list li .rank { width: 2ch; opacity: .85; }
#strip .board-list li .team { font-weight: 600; }
#strip .board-list li .pts { font-variant-numeric: tabular-nums; }
#strip .board-list li.empty { background: transparent; border: none; opacity: .8; justify-content: flex-start; }

/* Content styles for questions */
.qwrap { display: grid; grid-template-rows: auto 1fr; gap: .5rem; padding: 1rem; width: 100%; }
.qwrap .title { font-size: 1.6rem; font-weight: 700; }
.qwrap .body { overflow: hidden; container-type: size; }
.qwrap .body img { width: 100%; height: 100%; object-fit: contain; border-radius: .4rem; border: 1px solid #1f2937; }
.qwrap .body .text { font-size: clamp(18px, min(9cqh, 8cqw), 80px); line-height: 1.2; }
.qwrap .hint { font-size: 0.75em; }
.qwrap .hint { color: var(--muted); margin-top: .25rem; }

/* Grid view: promote hint within cell and downscale question text */
#grid .qwrap.has-promote .hint.promote { color: var(--text); font-size: clamp(18px, min(9cqh, 8cqw), 80px); line-height: 1.2; }
#grid .qwrap.has-promote .body .text { color: var(--muted); font-size: clamp(14px, min(7cqh, 6cqw), 56px); }
/* In grid, keep hint1 same size as question text when hint2 is promoted */
#grid .qwrap.has-promote .hint:not(.promote) { color: var(--muted); font-size: clamp(14px, min(7cqh, 6cqw), 56px); }

/* No media rule needed; width is based on stage height via cqh */

/* Overlay for team entry */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: grid; place-items: center; z-index: 9999; }
.modal { background: var(--card); border: 1px solid #1f2937; border-radius: .8rem; padding: 1.25rem; width: min(520px, 92vw); }
.modal h2 { margin: 0 0 .75rem 0; font-size: 1.25rem; }
.modal input[type=password] { width: 100%; }
.modal .row { display: flex; gap: .5rem; margin-top: .75rem; }
.modal .result { color: var(--muted); min-height: 1.2rem; margin-top: .25rem; }
